type Fund @entity {
  id: Bytes! #address of the cloned Fund
  manager: Bytes! # address of the msg.sender who created the fund
  creation_timestamp: BigInt! # block.timestamp for when the fund was created
  closed_timestamp: BigInt # indicates when the fund was closed, null means not closed yet
  subscribers: [Bytes!]!
  actions: [Action!]! @derivedFrom(field: "fund") # to keep history of actions taken via takeActions
  rules: [Bytes!]! # to keep track of all the ruleHashes created via roboCop
  pending_positions: [Position!]! @derivedFrom(field: "fund")
}

type Position @entity {
  id: Bytes! # positionHash stored in the contracts
  next_actions: [Bytes!]! # array of possible actions that can be done
  fund: Fund!
  source: PositionSource
}

enum PositionSource {
  Fund
  RoboCop
}

type Action @entity {
  id: ID!
  action: Bytes!
  timestamp: BigInt!
  fund: Fund!
}
